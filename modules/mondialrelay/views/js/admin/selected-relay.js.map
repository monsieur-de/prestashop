{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./_dev/js/admin/selected-relay.js","webpack:///./_dev/js/mondialrelay_widget.js"],"names":["$","MR_Widget","on","savedRelay","hide","init","ColLivMod","MONDIALRELAY_DELIVERY_MODE","ev","data","displayErrors","val","relayData","ID","document","selected_relay_input","MONDIALRELAY_NO_SELECTION_ERROR","stopPropagation","preventDefault","widget","loadJs","url","callback","script","createElement","onload","src","head","appendChild","load","loaded","params","MONDIALRELAY_BAD_CONFIGURATION","summary_container","slideDown","addLoader","widget_container","defaultParams","Target","Brand","MONDIALRELAY_ENSEIGNE","Country","MONDIALRELAY_COUNTRY_ISO","PostCode","MONDIALRELAY_POSTCODE","ShowResultsOnMap","MONDIALRELAY_DISPLAY_MAP","NbResults","Responsive","OnParcelShopSelected","save_container","show","setSelectedRelay","includes","extend","widget_current_params","MR_ParcelShopPicker","initialized","update","trigger","doSearch","initOrUpdate","relayIdentifier","MONDIALRELAY_SELECTED_RELAY_IDENTIFIER","oldRelay","resetSelectedRelay","resetSavedRelay","hideWidget","slideUp","zipcode","country_iso","searchCriteria","widget_search_zipcode_input","widget_search_country_input","messages","box","error_container","length","stop","children","fadeOut","empty","queue","errors","each","k","m","push","addClass","text","append","dequeue","fadeIn","container","clone","attr","appendTo","removeLoader","remove","ready","change_button"],"mappings":"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","file":"js/admin/selected-relay.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./_dev/js/admin/selected-relay.js\");\n","/**\n * NOTICE OF LICENSE\n *\n * @author    202 ecommerce <tech@202-ecommerce.com>\n * @author    Mondial Relay\n * @copyright Copyright (c) Mondial Relay\n * @license http://opensource.org/licenses/osl-3.0.php Open Software License (OSL 3.0)\n */\n\n// modules ES6\nimport * as MR_Widget from '../mondialrelay_widget';\n\n$(MR_Widget.widget).on('mondialrelay.ready', function() {\n  // Don't show the map if it's not immediately needed\n  if (MR_Widget.widget.savedRelay) {\n    MR_Widget.widget.hide();\n  }\n  MR_Widget.widget.init({ ColLivMod: MONDIALRELAY_DELIVERY_MODE });\n});\n\n $(MR_Widget.widget).on('mondialrelay.selectedRelay', function(ev, data) {\n  MR_Widget.widget.displayErrors(null);\n  $(\"#mondialrelay_displayed-relay-number\").val(data.relayData.ID);\n});\n\n$(document).on('submit', '#mondialrelay_selected_relay_form', function(ev) {\n  if (!$(MR_Widget.widget.selected_relay_input).val()) {\n    MR_Widget.widget.displayErrors([MONDIALRELAY_NO_SELECTION_ERROR]);\n    ev.stopPropagation();\n    ev.preventDefault();\n    return false;\n  }\n});","/**\n * NOTICE OF LICENSE\n *\n * @author    202 ecommerce <tech@202-ecommerce.com>\n * @author    Mondial Relay\n * @copyright Copyright (c) Mondial Relay\n * @license http://opensource.org/licenses/osl-3.0.php Open Software License (OSL 3.0)\n */\n\nconst widget = {\n  'url': '//widget.mondialrelay.com/parcelshop-picker/jquery.plugin.mondialrelay.parcelshoppicker.min.js',\n  'loaded': false,\n  'initialized': false,\n  'widget_container': '#mondialrelay_widget',\n  'save_container': '#mondialrelay_save-container',\n  'error_container': '#mondialrelay_errors',\n  'summary_container': '#mondialrelay_summary',\n  'save_button': '#mondialrelay_save-relay',\n  'change_button': '#mondialrelay_change-relay',\n  'selected_relay_input': '#mondialrelay_selected-relay',\n  'widget_search_zipcode_input': '#mondialrelay_widget .MRW-Search .Arg2',\n  'widget_search_country_input': '#mondialrelay_widget .MRW-Search .Arg1',\n  'savedRelay': null,\n  // This is basically read-only; it's used to check the widget's current state\n  'widget_current_params': null,\n};\n\nconst loadJs = (url, callback) => {\n  var script = document.createElement('script');\n  script.onload = callback;\n  script.src = url;\n  \n  document.head.appendChild(script);\n};\n\nwidget.load = (callback) => {\n  loadJs(widget.url, function() {\n    widget.loaded = true;\n    callback();\n  });\n};\n\nwidget.init = (params) => {\n  \n  // Access to the page may be completely blocked if the configuration isn't\n  // done, so this variable may not always be defined.\n  if (\n    typeof MONDIALRELAY_BAD_CONFIGURATION != 'undefined'\n    && MONDIALRELAY_BAD_CONFIGURATION\n  ) {\n    return;\n  }\n  \n  if (widget.savedRelay) {\n    $(widget.summary_container).slideDown();\n  }\n  \n  if (!widget.loaded) {\n    widget.addLoader(widget.widget_container);\n    widget.load(function() {\n      // No need to remove the loader; it will be replaced by the\n      // widget's content\n      widget.init(params);\n    });\n    return;\n  }\n  \n  let defaultParams = {\n    // Where to store the selected relay's ID\n    Target: widget.selected_relay_input,\n    Brand: MONDIALRELAY_ENSEIGNE,\n    // iso code, 2 letters\n    Country: MONDIALRELAY_COUNTRY_ISO,\n    // Postcode for default search\n    PostCode: MONDIALRELAY_POSTCODE,\n    // Delivery mode; carrier dependent (Standard [24R], XL [24L], XXL [24X], Drive [DRI])\n    // Here for information, but don't set a default value; we should always set\n    // one directly\n    // ColLivMod: '24R',\n    // Wether to display the relays on a map or as a list\n    ShowResultsOnMap: MONDIALRELAY_DISPLAY_MAP == true,\n    // Nombre de Point Relais à afficher\n    NbResults: \"7\",\n    Responsive: true,\n    OnParcelShopSelected: function(relayData) {\n      $(widget.save_container).show();\n      widget.setSelectedRelay(null, relayData);\n    }\n  };\n\n  defaultParams['Theme'] = ['ES', 'IT', 'PT'].includes(MONDIALRELAY_COUNTRY_ISO) ? 'inpost' : 'mondialrelay';\n  \n  if (params) {\n    $.extend(defaultParams, params);\n  }\n\n  widget.widget_current_params = defaultParams;\n  $(widget.widget_container).MR_ParcelShopPicker(defaultParams);\n  widget.initialized = true;\n};\n\nwidget.show = () => {\n  $(widget.widget_container).show();\n};\n\nwidget.hide = () => {\n  $(widget.widget_container).hide();\n};\n\nwidget.update = (params) => {\n  $(widget.widget_container).trigger(\"MR_SetParams\", params);\n  widget.widget_current_params = $.extend(widget.widget_current_params, params);\n  widget.doSearch();\n};\n\nwidget.initOrUpdate = (params) => {\n  if (widget.initialized) {\n    widget.update(params);\n  } else {\n    widget.init(params);\n  }\n};\n\nwidget.setSelectedRelay = (relayIdentifier, relayData) => {\n  if (typeof relayIdentifier == 'undefined' || !relayIdentifier) {\n    relayIdentifier = $(widget.selected_relay_input).val();\n  }\n  \n  if (relayIdentifier != $(widget.selected_relay_input).val()) {\n    // @TODO : select relay on map... if we can\n    return;\n  }\n  \n  // This can happen sometimes; we don't want to trigger a change if the value\n  // didn't actually change\n  if (MONDIALRELAY_SELECTED_RELAY_IDENTIFIER != relayIdentifier) {\n    let oldRelay = MONDIALRELAY_SELECTED_RELAY_IDENTIFIER;\n    MONDIALRELAY_SELECTED_RELAY_IDENTIFIER = relayIdentifier;\n    $(widget).trigger('mondialrelay.selectedRelay', {oldRelay: oldRelay, relayData: relayData});\n  }\n};\n\nwidget.resetSelectedRelay = () => {\n    let oldRelay = MONDIALRELAY_SELECTED_RELAY_IDENTIFIER;\n    MONDIALRELAY_SELECTED_RELAY_IDENTIFIER = null;\n    $(widget).trigger('mondialrelay.selectedRelay', {oldRelay: oldRelay, relayData: null});\n};\n\nwidget.resetSavedRelay = (hideWidget) => {\n    widget.savedRelay = null;\n    \n    if (typeof hideWidget === 'undefined' || !hideWidget) {\n      $(widget.summary_container).slideUp();\n      $(widget.widget_container).slideDown();\n      $(widget.save_container).slideDown();\n    }\n};\n\nwidget.doSearch = (zipcode, country_iso) => {\n  let searchCriteria = [\n    typeof zipcode !== 'undefined' && zipcode ?  zipcode : $(widget.widget_search_zipcode_input).val(),\n    typeof country_iso !== 'undefined' && country_iso ?  country_iso : $(widget.widget_search_country_input).val(),\n  ];\n  $(widget.widget_container).trigger('MR_DoSearch', searchCriteria);\n};\n\nwidget.displayErrors = (messages) => {\n  let box = $(widget.error_container);\n  if (box.length == 0) {\n    return;\n  }\n  \n  box.stop(true);\n  \n  if (box.children().length) {\n    box.fadeOut(function() {\n      $(this).empty();\n    });\n  }\n  \n  if (typeof messages == 'undefined' || !messages) {\n    return;\n  }\n  \n  // Either the queue is already going with .fadeOut(), either it will be\n  // launched by .fadeIn()\n  box.queue(function() {\n    \n    let errors = [];\n    $.each(messages, function(k, m) {\n      errors.push($(\"<div/>\").addClass(\"alert alert-danger\").text(m));\n    });\n    \n    $(this).append(errors);\n    $(this).dequeue();\n  });\n  box.fadeIn();\n};\n\nwidget.addLoader = (container) => {\n  if ($(container).length == 0) {\n    return;\n  }\n  \n  if ($(container).children('.mondialrelay_loader').length > 0) {\n    return;\n  }\n  \n  $(\"#mondialrelay_loader-template\")\n    .clone()\n    .attr('id', null)\n    .show()\n    .appendTo(container);\n};\n\nwidget.removeLoader = (container) => {\n  $(container).children('.mondialrelay_loader').remove();\n};\n\n$(document).ready(function() {\n  widget.savedRelay = MONDIALRELAY_SELECTED_RELAY_IDENTIFIER;\n  $(widget).trigger('mondialrelay.ready');\n});\n\n$(document).on('click', widget.change_button, function(ev) {\n  widget.show();\n});\n\n$(document).on('click', '.MRW-ShowList', function(ev) {\n    ev.preventDefault();\n    ev.stopPropagation();\n});\n\n// Selecting a city from the autocomplete list may trigger things\n$(document).on('click', '.PR-City', function(ev) {\n  ev.preventDefault();\n  ev.stopPropagation();\n});\n\nexport { widget };"],"sourceRoot":""}