/*!
 * NOTICE OF LICENSE
 * 
 * @author    202 ecommerce <tech@202-ecommerce.com>
 * @author    Mondial Relay
 * @copyright Copyright (c) Mondial Relay
 * @license http://opensource.org/licenses/osl-3.0.php Open Software License (OSL 3.0)
 */!function(e){var n={};function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)t.d(r,a,function(n){return e[n]}.bind(null,a));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=13)}({0:function(e,n,t){"use strict";t.d(n,"d",(function(){return i})),t.d(n,"c",(function(){return u})),t.d(n,"b",(function(){return s})),t.d(n,"a",(function(){return y})),t.d(n,"e",(function(){return d}));var r=t(2);function a(e,n){return function(e){if(Array.isArray(e))return e}
/**
 * NOTICE OF LICENSE
 *
 * @author    202 ecommerce <tech@202-ecommerce.com>
 * @author    Mondial Relay
 * @copyright Copyright (c) Mondial Relay
 * @license http://opensource.org/licenses/osl-3.0.php Open Software License (OSL 3.0)
 */(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o,i,l=[],c=!0,d=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=o.call(t)).done)&&(l.push(r.value),l.length!==n);c=!0);}catch(e){d=!0,a=e}finally{try{if(!c&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(d)throw a}}return l}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return o(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return o(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var i=function(){for(var e=0,n=Object.entries(MONDIALRELAY_CARRIER_METHODS);e<n.length;e++){var t=a(n[e],2),r=t[0],o=t[1];(["ES","IT","PT"].includes(MONDIALRELAY_COUNTRY_ISO)&&"IP"!==o.delivery_type||!["ES","IT","PT"].includes(MONDIALRELAY_COUNTRY_ISO)&&"MR"!==o.delivery_type||!MONDIALRELAY_ADDRESS_OPC)&&(o=$('[name^="delivery_option"][value="'+r+',"]')[0])&&l(o,c)}},l=function(e,n){var t;(t=e.closest(".delivery-option")||e.closest(".delivery_option"))&&n(t)},c=function(e){e.remove()},d=r.a,u=function(){return MONDIALRELAY_NATIVE_RELAY_CARRIERS_IDS.includes(s())},s=function(){var e=$('[name^="delivery_option"]:checked').val();if(void 0!==e){var n=e.split(",");e=n[0]}return e||!1},y=function(e){return MONDIALRELAY_CARRIER_METHODS[e].delivery_mode};$(document).ready((function(){i()})),$(document).on("click",d.save_button,(function(e){e.preventDefault(),e.stopPropagation(),d.displayErrors(null),$(d.summary_container).empty().show(),d.addLoader(d.summary_container),$(d).trigger("mondialrelay.saveSelectedRelay.before");var n={ajax:!0,action:"saveSelectedRelay",mondialrelay_selectedRelay:MONDIALRELAY_SELECTED_RELAY_IDENTIFIER||0,id_carrier:s()};return $.ajax({type:"POST",url:MONDIALRELAY_AJAX_CHECKOUT_URL,data:n,dataType:"json",success:function(e){if(e){if("ok"!=e.status)return d.savedRelay=null,e.error.length&&d.displayErrors(e.error),d.removeLoader($(d.summary_container)),void $(d).trigger("mondialrelay.saveSelectedRelay.error");d.savedRelay=MONDIALRELAY_SELECTED_RELAY_IDENTIFIER,$(d.summary_container).html(e.content.relaySummary),d.hide(),$(d.save_container).hide(),$(d.widget_container).slideUp(),$(d.save_container).slideUp(),$(d).trigger("mondialrelay.saveSelectedRelay.success")}else this.error(e)},error:function(e){d.savedRelay=null,alert(MONDIALRELAY_SAVE_RELAY_ERROR),$(d).trigger("mondialrelay.saveSelectedRelay.error"),d.removeLoader($(d.summary_container))}}),!1}))},13:function(e,n,t){"use strict";t.r(n);var r=t(0),a=null,o=null,i=null,l=function(){return a=$('[name^="delivery_option"]:checked').closest(".delivery-option").next(".carrier-extra-content")};
/**
 * NOTICE OF LICENSE
 *
 * @author    202 ecommerce <tech@202-ecommerce.com>
 * @author    Mondial Relay
 * @copyright Copyright (c) Mondial Relay
 * @license http://opensource.org/licenses/osl-3.0.php Open Software License (OSL 3.0)
 */$("#mondialrelay_save-relay").on("click",(function(){$('button.continue[name="confirmDeliveryOption"]').removeAttr("disabled")}));var c=function(e){e?($("#checkout-delivery-step").removeClass("-complete"),$("button[name='confirmDeliveryOption']").attr("disabled",!0)):($("#checkout-delivery-step").addClass("-complete"),$("button[name='confirmDeliveryOption']").attr("disabled",!1))};$(document).ready((function(){var e;MONDIALRELAY_CARRIER_METHODS.length>0&&(e=MONDIALRELAY_CARRIER_METHODS[Object.keys(MONDIALRELAY_CARRIER_METHODS)[0]].id_carrier,a=$("#delivery_option_"+e).closest(".delivery-option").next(".carrier-extra-content"),$("#mondialrelay_content").appendTo(a),r.e.init({ColLivMod:r.a(MONDIALRELAY_CARRIER_METHODS[Object.keys(MONDIALRELAY_CARRIER_METHODS)[0]].id_carrier)}))})),$(r.e).on("mondialrelay.ready",(function(){r.c()&&(l(),null===i&&(i=$("#checkout-payment-step").hasClass("-reachable")),$("#checkout-payment-step").removeClass("-reachable").addClass("-unreachable"),$("#mondialrelay_content").appendTo(a),r.e.savedRelay?($(r.e.summary_container).show(),r.e.hide(),$("#checkout-payment-step").hasClass("-unreachable")&&$("#checkout-payment-step").removeClass("-unreachable").addClass("-reachable")):(c(!0),r.e.show()),r.e.init({ColLivMod:r.a(r.b())})),$(r.e.widget_container).on("click",(function(e){e.preventDefault(),e.stopPropagation()}))})),$(document).on("submit","#js-delivery",(function(e){return!(r.c()&&!r.e.savedRelay)||(e.preventDefault(),e.stopPropagation(),l(),$("#mondialrelay_content").appendTo(a),r.e.initOrUpdate({ColLivMod:r.a(r.b())}),alert(MONDIALRELAY_NO_SELECTION_ERROR),!1)})),prestashop.on("updatedDeliveryForm",(function(){r.e.savedRelay=MONDIALRELAY_SELECTED_RELAY_IDENTIFIER})),$(document).on("change",'#js-delivery [name^="delivery_option"]',(function(e){if(!r.c())return a&&(a.hide(),a=null),c(!1),r.e.resetSelectedRelay(),r.e.resetSavedRelay(!0),o&&($("#checkout-payment-step .content").append(o),o=null),void(null!==i&&i&&$("#checkout-payment-step").addClass("-reachable").removeClass("-unreachable"));(o=$(".js-cart-payment-step-refresh").clone(),$(".js-cart-payment-step-refresh").remove(),null===i&&(i=$("#checkout-payment-step").hasClass("-reachable")),$("#checkout-payment-step").removeClass("-reachable").addClass("-unreachable"),r.e.savedRelay?$(e.target).is(r.e.selected_relay_input)||r.e.hide():(c(!0),r.e.show()),a&&a.hide(),null!=r.e.widget_current_params)&&(r.e.widget_current_params.ColLivMod!=r.a(r.b())&&(r.e.resetSelectedRelay(),r.e.resetSavedRelay()));l(),$("#mondialrelay_content").appendTo(a),r.e.initOrUpdate({ColLivMod:r.a(r.b())})})),$("#js-delivery").on("change","#mondialrelay_content *",(function(e){e.preventDefault(),e.stopPropagation()})),$(r.e).on("mondialrelay.saveSelectedRelay.before",(function(){c(!0),$("[name^='delivery_option']").attr("readonly",!0).on("click.mondialrelay.lock",(function(e){e.preventDefault(),e.stopPropagation()}))})),$(r.e).on("mondialrelay.saveSelectedRelay.success",(function(){c(!1),$("[name^='delivery_option']").attr("readonly",!1).off("click.mondialrelay.lock")})),$(r.e).on("mondialrelay.saveSelectedRelay.error",(function(){c(!0),$("[name^='delivery_option']").attr("readonly",!1).off("click.mondialrelay.lock")})),window.mondialrelayWidget=r.e},2:function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));
/**
 * NOTICE OF LICENSE
 *
 * @author    202 ecommerce <tech@202-ecommerce.com>
 * @author    Mondial Relay
 * @copyright Copyright (c) Mondial Relay
 * @license http://opensource.org/licenses/osl-3.0.php Open Software License (OSL 3.0)
 */
var r={url:"//widget.mondialrelay.com/parcelshop-picker/jquery.plugin.mondialrelay.parcelshoppicker.min.js",loaded:!1,initialized:!1,widget_container:"#mondialrelay_widget",save_container:"#mondialrelay_save-container",error_container:"#mondialrelay_errors",summary_container:"#mondialrelay_summary",save_button:"#mondialrelay_save-relay",change_button:"#mondialrelay_change-relay",selected_relay_input:"#mondialrelay_selected-relay",widget_search_zipcode_input:"#mondialrelay_widget .MRW-Search .Arg2",widget_search_country_input:"#mondialrelay_widget .MRW-Search .Arg1",savedRelay:null,widget_current_params:null};r.load=function(e){!function(e,n){var t=document.createElement("script");t.onload=n,t.src=e,document.head.appendChild(t)}(r.url,(function(){r.loaded=!0,e()}))},r.init=function(e){if("undefined"==typeof MONDIALRELAY_BAD_CONFIGURATION||!MONDIALRELAY_BAD_CONFIGURATION){if(r.savedRelay&&$(r.summary_container).slideDown(),!r.loaded)return r.addLoader(r.widget_container),void r.load((function(){r.init(e)}));var n={Target:r.selected_relay_input,Brand:MONDIALRELAY_ENSEIGNE,Country:MONDIALRELAY_COUNTRY_ISO,PostCode:MONDIALRELAY_POSTCODE,ShowResultsOnMap:1==MONDIALRELAY_DISPLAY_MAP,NbResults:"7",Responsive:!0,OnParcelShopSelected:function(e){$(r.save_container).show(),r.setSelectedRelay(null,e)}};n.Theme=["ES","IT","PT"].includes(MONDIALRELAY_COUNTRY_ISO)?"inpost":"mondialrelay",e&&$.extend(n,e),r.widget_current_params=n,$(r.widget_container).MR_ParcelShopPicker(n),r.initialized=!0}},r.show=function(){$(r.widget_container).show()},r.hide=function(){$(r.widget_container).hide()},r.update=function(e){$(r.widget_container).trigger("MR_SetParams",e),r.widget_current_params=$.extend(r.widget_current_params,e),r.doSearch()},r.initOrUpdate=function(e){r.initialized?r.update(e):r.init(e)},r.setSelectedRelay=function(e,n){if(void 0!==e&&e||(e=$(r.selected_relay_input).val()),e==$(r.selected_relay_input).val()&&MONDIALRELAY_SELECTED_RELAY_IDENTIFIER!=e){var t=MONDIALRELAY_SELECTED_RELAY_IDENTIFIER;MONDIALRELAY_SELECTED_RELAY_IDENTIFIER=e,$(r).trigger("mondialrelay.selectedRelay",{oldRelay:t,relayData:n})}},r.resetSelectedRelay=function(){var e=MONDIALRELAY_SELECTED_RELAY_IDENTIFIER;MONDIALRELAY_SELECTED_RELAY_IDENTIFIER=null,$(r).trigger("mondialrelay.selectedRelay",{oldRelay:e,relayData:null})},r.resetSavedRelay=function(e){r.savedRelay=null,void 0!==e&&e||($(r.summary_container).slideUp(),$(r.widget_container).slideDown(),$(r.save_container).slideDown())},r.doSearch=function(e,n){var t=[void 0!==e&&e?e:$(r.widget_search_zipcode_input).val(),void 0!==n&&n?n:$(r.widget_search_country_input).val()];$(r.widget_container).trigger("MR_DoSearch",t)},r.displayErrors=function(e){var n=$(r.error_container);0!=n.length&&(n.stop(!0),n.children().length&&n.fadeOut((function(){$(this).empty()})),void 0!==e&&e&&(n.queue((function(){var n=[];$.each(e,(function(e,t){n.push($("<div/>").addClass("alert alert-danger").text(t))})),$(this).append(n),$(this).dequeue()})),n.fadeIn()))},r.addLoader=function(e){0!=$(e).length&&($(e).children(".mondialrelay_loader").length>0||$("#mondialrelay_loader-template").clone().attr("id",null).show().appendTo(e))},r.removeLoader=function(e){$(e).children(".mondialrelay_loader").remove()},$(document).ready((function(){r.savedRelay=MONDIALRELAY_SELECTED_RELAY_IDENTIFIER,$(r).trigger("mondialrelay.ready")})),$(document).on("click",r.change_button,(function(e){r.show()})),$(document).on("click",".MRW-ShowList",(function(e){e.preventDefault(),e.stopPropagation()})),$(document).on("click",".PR-City",(function(e){e.preventDefault(),e.stopPropagation()}))}});